{"ast":null,"code":"import React from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function getWeatherIcon(wmoCode){const icons=new Map([[[0],\"☀️\"],[[1],\"🌤\"],[[2],\"⛅️\"],[[3],\"☁️\"],[[45,48],\"🌫\"],[[51,56,61,66,80],\"🌦\"],[[53,55,63,65,57,67,81,82],\"🌧\"],[[71,73,75,77,85,86],\"🌨\"],[[95],\"🌩\"],[[96,99],\"⛈\"]]);const arr=[...icons.keys()].find(key=>key.includes(wmoCode));return arr?icons.get(arr):\"❓\";}function convertToFlag(countryCode){const codePoints=countryCode.toUpperCase().split(\"\").map(char=>127397+char.charCodeAt());return String.fromCodePoint(...codePoints);}function formatDay(dateStr){return new Intl.DateTimeFormat(\"en\",{weekday:\"short\"}).format(new Date(dateStr));}class App extends React.Component{constructor(){super(...arguments);this.state={location:\"\",isLoading:false,displayLocation:\"\",weather:null,error:\"\"};this.fetchWeather=async()=>{if(this.state.location.length<2)return this.setState({weather:null,error:\"Please enter a valid location\"});try{this.setState({isLoading:true,error:\"\"});// 1) Getting location (geocoding)\nconst geoRes=await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${this.state.location}`);const geoData=await geoRes.json();if(!geoData.results)throw new Error(\"Location not found\");const{latitude,longitude,timezone,name,country_code}=geoData.results.at(0);this.setState({displayLocation:`${name} ${convertToFlag(country_code)}`});// 2) Getting actual weather\nconst weatherRes=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&timezone=${timezone}&daily=weathercode,temperature_2m_max,temperature_2m_min`);const weatherData=await weatherRes.json();this.setState({weather:weatherData.daily});}catch(err){this.setState({error:err.message,weather:null});}finally{this.setState({isLoading:false});}};this.setLocation=e=>this.setState({location:e.target.value});}componentDidMount(){this.setState({location:localStorage.getItem(\"location\")||\"\"});}componentDidUpdate(prevProps,prevState){if(this.state.location!==prevState.location){this.fetchWeather();localStorage.setItem(\"location\",this.state.location);}}render(){const{weather,isLoading,location,displayLocation,error}=this.state;return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Weather\"}),/*#__PURE__*/_jsx(Input,{location:location,onChangeLocation:this.setLocation}),isLoading&&/*#__PURE__*/_jsx(\"p\",{className:\"loader\",children:\"Loading...\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:error}),weather&&weather.weathercode&&/*#__PURE__*/_jsx(Weather,{weather:weather,location:displayLocation})]});}}export default App;class Input extends React.Component{render(){return/*#__PURE__*/_jsx(\"div\",{className:\"input-container\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search for location...\",value:this.props.location,onChange:this.props.onChangeLocation})});}}class Weather extends React.Component{componentWillUnmount(){console.log(\"Weather will unmount\");}render(){const{temperature_2m_max:max,temperature_2m_min:min,time:dates,weathercode:codes}=this.props.weather;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Weather in \",this.props.location]}),/*#__PURE__*/_jsx(\"ul\",{className:\"weather\",children:dates.map((date,i)=>/*#__PURE__*/_jsx(Day,{date:date,max:max.at(i),min:min.at(i),code:codes.at(i),isToday:i===0},date))})]});}}class Day extends React.Component{render(){const{date,max,min,code,isToday}=this.props;return/*#__PURE__*/_jsxs(\"li\",{className:\"day\",children:[/*#__PURE__*/_jsx(\"span\",{children:getWeatherIcon(code)}),/*#__PURE__*/_jsx(\"p\",{children:isToday?\"Today\":formatDay(date)}),/*#__PURE__*/_jsxs(\"p\",{children:[Math.floor(min),\"\\xB0 \\u2014 \",/*#__PURE__*/_jsxs(\"strong\",{children:[Math.ceil(max),\"\\xB0\"]})]})]});}}","map":{"version":3,"names":["React","jsx","_jsx","jsxs","_jsxs","getWeatherIcon","wmoCode","icons","Map","arr","keys","find","key","includes","get","convertToFlag","countryCode","codePoints","toUpperCase","split","map","char","charCodeAt","String","fromCodePoint","formatDay","dateStr","Intl","DateTimeFormat","weekday","format","Date","App","Component","constructor","arguments","state","location","isLoading","displayLocation","weather","error","fetchWeather","length","setState","geoRes","fetch","geoData","json","results","Error","latitude","longitude","timezone","name","country_code","at","weatherRes","weatherData","daily","err","message","setLocation","e","target","value","componentDidMount","localStorage","getItem","componentDidUpdate","prevProps","prevState","setItem","render","className","children","Input","onChangeLocation","weathercode","Weather","type","placeholder","props","onChange","componentWillUnmount","console","log","temperature_2m_max","max","temperature_2m_min","min","time","dates","codes","date","i","Day","code","isToday","Math","floor","ceil"],"sources":["D:/The Ultimate React Course 2023 React, Redux & More/ultimate-react-course-main/09-classy-weather/prodigy/src/App.js"],"sourcesContent":["import React from \"react\";\n\nfunction getWeatherIcon(wmoCode) {\n  const icons = new Map([\n    [[0], \"☀️\"],\n    [[1], \"🌤\"],\n    [[2], \"⛅️\"],\n    [[3], \"☁️\"],\n    [[45, 48], \"🌫\"],\n    [[51, 56, 61, 66, 80], \"🌦\"],\n    [[53, 55, 63, 65, 57, 67, 81, 82], \"🌧\"],\n    [[71, 73, 75, 77, 85, 86], \"🌨\"],\n    [[95], \"🌩\"],\n    [[96, 99], \"⛈\"],\n  ]);\n  const arr = [...icons.keys()].find((key) => key.includes(wmoCode));\n  return arr ? icons.get(arr) : \"❓\";\n}\n\nfunction convertToFlag(countryCode) {\n  const codePoints = countryCode\n    .toUpperCase()\n    .split(\"\")\n    .map((char) => 127397 + char.charCodeAt());\n  return String.fromCodePoint(...codePoints);\n}\n\nfunction formatDay(dateStr) {\n  return new Intl.DateTimeFormat(\"en\", { weekday: \"short\" }).format(\n    new Date(dateStr)\n  );\n}\n\nclass App extends React.Component {\n  state = {\n    location: \"\",\n    isLoading: false,\n    displayLocation: \"\",\n    weather: null,\n    error: \"\",\n  };\n\n  fetchWeather = async () => {\n    if (this.state.location.length < 2)\n      return this.setState({\n        weather: null,\n        error: \"Please enter a valid location\",\n      });\n\n    try {\n      this.setState({ isLoading: true, error: \"\" });\n\n      // 1) Getting location (geocoding)\n      const geoRes = await fetch(\n        `https://geocoding-api.open-meteo.com/v1/search?name=${this.state.location}`\n      );\n      const geoData = await geoRes.json();\n\n      if (!geoData.results) throw new Error(\"Location not found\");\n\n      const { latitude, longitude, timezone, name, country_code } =\n        geoData.results.at(0);\n\n      this.setState({\n        displayLocation: `${name} ${convertToFlag(country_code)}`,\n      });\n\n      // 2) Getting actual weather\n      const weatherRes = await fetch(\n        `https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&timezone=${timezone}&daily=weathercode,temperature_2m_max,temperature_2m_min`\n      );\n      const weatherData = await weatherRes.json();\n\n      this.setState({ weather: weatherData.daily });\n    } catch (err) {\n      this.setState({ error: err.message, weather: null });\n    } finally {\n      this.setState({ isLoading: false });\n    }\n  };\n\n  setLocation = (e) => this.setState({ location: e.target.value });\n\n  componentDidMount() {\n    this.setState({ location: localStorage.getItem(\"location\") || \"\" });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.state.location !== prevState.location) {\n      this.fetchWeather();\n      localStorage.setItem(\"location\", this.state.location);\n    }\n  }\n\n  render() {\n    const { weather, isLoading, location, displayLocation, error } = this.state;\n\n    return (\n      <div className=\"app\">\n        <h1>Weather</h1>\n        <Input location={location} onChangeLocation={this.setLocation} />\n\n        {isLoading && <p className=\"loader\">Loading...</p>}\n\n        {error && <p className=\"error\">{error}</p>}\n\n        {weather && weather.weathercode && (\n          <Weather weather={weather} location={displayLocation} />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n\nclass Input extends React.Component {\n  render() {\n    return (\n      <div className=\"input-container\">\n        <input\n          type=\"text\"\n          placeholder=\"Search for location...\"\n          value={this.props.location}\n          onChange={this.props.onChangeLocation}\n        />\n      </div>\n    );\n  }\n}\n\nclass Weather extends React.Component {\n  componentWillUnmount() {\n    console.log(\"Weather will unmount\");\n  }\n\n  render() {\n    const {\n      temperature_2m_max: max,\n      temperature_2m_min: min,\n      time: dates,\n      weathercode: codes,\n    } = this.props.weather;\n\n    return (\n      <div>\n        <h2>Weather in {this.props.location}</h2>\n        <ul className=\"weather\">\n          {dates.map((date, i) => (\n            <Day\n              date={date}\n              max={max.at(i)}\n              min={min.at(i)}\n              code={codes.at(i)}\n              key={date}\n              isToday={i === 0}\n            />\n          ))}\n        </ul>\n      </div>\n    );\n  }\n}\n\nclass Day extends React.Component {\n  render() {\n    const { date, max, min, code, isToday } = this.props;\n\n    return (\n      <li className=\"day\">\n        <span>{getWeatherIcon(code)}</span>\n        <p>{isToday ? \"Today\" : formatDay(date)}</p>\n        <p>\n          {Math.floor(min)}&deg; &mdash; <strong>{Math.ceil(max)}&deg;</strong>\n        </p>\n      </li>\n    );\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}